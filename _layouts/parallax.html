<!DOCTYPE html>
<html class="{% if page.ignore-accent-color == true %}ignore-accent-color{% endif %} {% if page.force-dark-mode == true %}force-dark-mode{% endif %}" lang="en-US" prefix="og: http://ogp.me/ns#">

<!--
Produces a parallax effect with a "background" asset (image, video, or custom,
see Settings options for details). The menu bar chrome is disabled for this
layout style, but the "article"/foreground content's chrome remains, and
scrolls over the background content with a parallax effect.

Settings:

Currently used for:
  /projects/music/smile-heroes-and-villains-mix/
  /projects/code/the-largest-video-game-ever-made/
  /post/deep-blue
-->

	{% include head.html %}

	<body>
		<div id="parallax">
			<div class="container">
				{% include menu.html %}

				{% if page.parallax-image != nil or page.banner-video != nil %}
				<div id="parallax-background" class="layer">
					{% if page.banner-video != nil %}
					<figure>
						<video controls preload="none" class="edge-to-edge" {% if page.banner-poster %}poster="{{ site.dropbox }}/{{ page.banner-poster }}"{% endif %} alt="{% if page.banner-alt %}{{ page.banner-alt }}{% else %}Post banner{% endif %}">
							<source src="{{ site.dropbox }}/{{ page.banner-video }}.mp4" type="video/mp4">
							<source src="{{ site.dropbox }}/{{ page.banner-video }}.webm" type="video/webm">
							<source src="{{ site.dropbox }}/{{ page.banner-video }}.ogv" type="video/ogg">
							[HTML5 video tag not supported by your browser]
						</video>
					</figure>
					{% endif %}
					{% if page.show-up-arrow %}
					<svg alt="Minimalist up arrow" onclick="upArrowClicked();" class="noselect" id="up-arrow" viewBox="0 0 565 565" version="1.1" role="img">
						<g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
							<path d="M242.609127,161.5 L18.96767,385.141457 L-0.477766446,404.586893 L38.4131065,443.477766 L57.858543,424.03233 L281.5,200.390873 L505.141457,424.03233 L524.586893,443.477766 L563.477766,404.586893 L544.03233,385.141457 L320.390873,161.5 L320.461176,161.429697 L281.570303,122.538824 L281.5,122.609127 L281.429697,122.538824 L242.538824,161.429697 L242.609127,161.5 Z"></path>
						</g>
					</svg>
					{% endif %}
				</div>
				<main id="parallax-foreground" class="layer">
					{% if page.url contains '/post/' or page.dir contains '/obsolete/' %}
					{% include article.html %}
					{% else %}
					<article>
						{{ content }}
						{% include footer.html %}
					</article>
					{% endif %}
				</div>
				{% else %}
				{{ content }}
				{% endif %}
			</div>
		</div>

		<style>
/* Only apply some styles if not ignore-accent-color???? TODO	*/
			html {
				background-color: {{ page.background-color }} !important;
			}
			#mainmenu {
				-webkit-backdrop-filter: unset !important;
				backdrop-filter: unset !important;
			}
			main,
			menu ul a,
			menu,
			.hover:hover:not(.active) {
				color: {{ page.foreground-color }};
			}
			.active,
			.hover:hover:not(.active) {
				color: {{ page.primary-color }} !important;
			}
			.signature-color {
				fill: {{ page.foreground-color }};
			}
			svg:hover .fill-color {
				fill: {{ page.primary-color }} !important;
			}
			#logo:hover .signature-color {
				fill: {{ page.primary-color }} !important;
			}

			#dark menu a:hover,
			#dark .hover:hover:not(.active) {
				background-color: {{ page.primary-color-hover }};
			}

			button, .button {
				background-color: {{ page.primary-color }};
			}
			button:hover,
			.button:hover {
				background-color: {{ page.primary-color-dark }};
			}

			main a,
			main a:link,
			main a:visited,
			.active,
			.anchor {
				color: {{ page.primary-color }};
			}
			main a:hover,
			.anchor:hover {
				background-color: {{ page.primary-color-hover }};
			}

			/* Highlights (must be seperate, combining them breaks the style) */
			::selection { /* Safari */
				background: {{ page.primary-color }};
				color: white;
			}
			::-moz-selection { /* Firefox */
				background: {{ page.primary-color }};
				color: white;
			}

			#up-arrow {
				top: 110vh;
				width: 32px;
				left: 50%;
				margin-left: -16px;
				position: absolute;
				cursor: pointer;
			}
			@media (min-width: 700px) {
				#up-arrow {
					top: 105vh;
					width: 64px;
					margin-left: -32px;
				}
			}

			#up-arrow path {
				fill: rgba(255, 255, 255, 0.5);
				transition: fill 0.2s ease;
			}
			#up-arrow:hover path {
				fill: rgba(255, 255, 255, 0.9);
			}
			{% if page.parallax-image != nil %}
			#parallax-background {
				background-image: url("{{ site.dropbox }}/{{ page.parallax-image }}");
			}
			{% endif %}
			{% if page.dark-background-color != nil %}
			html#dark {
				background-color: {{ page.dark-background-color }};
			}
			{% endif %}
		</style>
	</body>
</html>